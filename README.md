# Приложение-блог с использованием Spring Framework 

Приложение -- личный блог на Java и Spring. 

Используются Java 21, Spring Boot, Spring Web, Spring WebMVC, Thymeleaf, PostgreSQL, MapStruct. 

Для тестов используются JUnit 5, Mockito, Spring Boot Test, H2. 

Сборка происходит при помощи Maven (в версии 1 был Gradle).

## Функционал

- Лента постов с настраиваемой пагинацией, на которой отображаются превью постов 
(отрывок текста, счетчики лайков и комментариев, картинка, теги) в порядке от новейших. Есть возможность искать по тегам.
- Страницы отдельных постов с возможностью оставлять, редактировать и удалять комментарии к ним. Сами посты также можно
редактировать, изменяя их заголовок, текст, картинку и теги. Посты можно удалять.

## Сборка и запуск приложения
Запуск приложения можно произвести напрямую при помощи Maven, выполнив в папке проекта:
```bash
./mvnw spring-boot:run
```
Для сборки jar-файла из папки проекта выполнить:
```bash
./mvnw clean package
```
В результате в папке `target` должен появиться исполняемый jar-файл, который можно запустить из папки проекта командой
```bash
java -jar target/blogya-<версия>.jar
```

## Тесты
Приложение покрыто юнит-тестами (слои контроллеров и сервисов), а также интеграционными тестами. При выполнении интеграционных тестов приложение создает папку по пути, определенном в файле 
[application-test.properties](src/test/resources/application-test.properties) 
в настройке `app.files.directory`. При тестировании в этой папке будут удалены все файлы (кроме директорий).

При необходимости собрать приложение без прогона тестов, можно это сделать, добавив параметр `-DskipTests`:
```bash
./mvnw clean package -DskipTests
```

### SQL DDL скрипты
Перед запуском приложения следует подготовить базу данных, создав в ней нужные таблицы 
при помощи скрипта, который находится в папке `src/main/sql`

### Настройки приложения
- `spring.datasource.url` - URL базы данных
- `spring.datasource.username` - имя пользователя базы данных
- `spring.datasource.password` - пароль базы данных
- `app.files.directory` - путь до директории (без `/` на конце), в которой будут сохраняться картинки постов
- `spring.servlet.multipart.max-file-size` - максимальный размер изображения, которое можно загрузить
- `spring.servlet.multipart.max-request-size` - максимальный размер запроса на загрузку
